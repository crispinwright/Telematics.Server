<div id="body">
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>Welcome to ASP.NET Web API!</h1>
                <h2>Modify the code in this template to jump-start your ASP.NET Web API development.</h2>
            </hgroup>
            <p>
                ASP.NET Web API allows you to expose your applications, data and services to the
                web directly over HTTP.
            </p>
            <p>
                To learn more about ASP.NET Web API visit the
                <a href="http://go.microsoft.com/fwlink/?LinkID=238195" title="ASP.NET Web API Website">ASP.NET Web API Website</a>.
                The page features <mark>videos, tutorials, and samples</mark> to help you get the most from ASP.NET Web API.
                If you have any questions about ASP.NET Web API, visit
                <a href="http://go.microsoft.com/fwlink/?LinkID=238196" title="ASP.NET Web API Forum">our forums</a>.
            </p>
        </div>
    </section>
    <section class="content-wrapper main-content clear-fix">
        <h3>We suggest the following steps:</h3>
        <ol class="round">
            <li class="one">
                <h5>Getting Started</h5>
                ASP.NET Web API is a framework that makes it easy to build HTTP services that reach
                a broad range of clients, including browsers and mobile devices. ASP.NET Web API
                is an ideal platform for building RESTful applications on the .NET Framework.
                <a href="http://go.microsoft.com/fwlink/?LinkId=245160">Learn more…</a>
            </li>

            <li class="two">
                <h5>Add NuGet packages and jump-start your coding</h5>
                NuGet makes it easy to install and update free libraries and tools.
                <a href="http://go.microsoft.com/fwlink/?LinkId=245161">Learn more…</a>
            </li>
            <li class="three">
                <h5>Find Web Hosting</h5>
                You can easily find a web hosting company that offers the right mix of features
                and price for your applications.
                <a href="http://go.microsoft.com/fwlink/?LinkId=245164">Learn more…</a>
            </li>
        </ol>
    </section>
</div>

<div id="map-canvas" />

@section scripts
{
    <script src="/Telematics.Server/Scripts/jquery.signalR-2.0.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/Telematics.Server/signalr/hubs"></script>
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDRXUdZVJE8jHa0Pmf1VeMuB0m9M3c2PG8&sensor=false">
    </script>
    <script type="text/javascript">
        var map;
        $(function () {
            var chat = $.connection.geoHub;
            // Create a function that the hub can call to broadcast messages.
            chat.client.sendGeoData = function (geodata) {
                // Html encode display name and message.
                // alert(geodata.Time);
                addGeodataMarker(geodata);
            };
            $.connection.hub.start();
            // Get the user name and store it to prepend to messages.
        });

        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(-36.8730, 174.7550),
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
            var myLatlng = new google.maps.LatLng(-36.8730, 174.7550);
           // var marker = new google.maps.Marker({
          //      position: myLatlng,
          //      map: map,
         //       title: "Hello World!"
          //  });
        }

        var addGeodataMarker = function (geodata) {
            var myLatlng = new google.maps.LatLng(geodata.Lat, geodata.Long);
            var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
                title: geodata.CarPlate
            });
        };


        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
}


